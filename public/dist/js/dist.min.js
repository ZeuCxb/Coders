angular.module("coders",["ngRoute"]),angular.module("coders").config(["$routeProvider",function(r){r.when("/",{templateUrl:"views/home.html"}),r.when("/page/:_id",{templateUrl:"views/page.html"}).otherwise({redirectTo:"/"})}]),angular.module("coders").run(["$rootScope",function(r){return r.$on("connect",function(e,o){return r.$broadcast("connected",o)})}]),angular.module("coders").controller("appCtrl",["codersApi","codersAppUser","$location","$window","$scope",function(r,e,o,n,t){var u,c;c=this,u=function(){return r.connect().then(function(r){return c.user=r.data,e.setAppUser(c.user),t.$emit("connect",c.user)},function(){return c.user={}})},c.logOn=function(){var e;return c.logonUser?(e=c.logonUser,delete e.cpass,e.email=e.email.toLowerCase(),e.name=e.name.toLowerCase(),e.nick=e.nick.toLowerCase(),r.logon(e).then(function(r){return n.location.reload()},function(r){var e,o;if("error"===r.status){if(!r.data)return n.location.reload();if(e=r.data.errmsg.search("email"),o=r.data.errmsg.search("nick"),c.error={},e>0&&(c.error.email=!0),o>0)return c.error.nick=!0}})):void 0},c.logIn=function(){var e;return c.loginUser?(e=c.loginUser,e.login=e.login.toLowerCase(),r.login(e).then(function(r){return n.location.reload()},function(r){return c.error={},console.log(r),c.error.login=!0,c.error.pass=!0})):void 0},c.logOut=function(){return c.user?r.logout().then(function(){return n.location.reload()}):void 0},u()}]),angular.module("coders").controller("pageCtrl",["$routeParams","codersApi","codersAppUser",function(r,e,o){var n,t,u;n=r._id,u=this,u.page={},u.user=o.getAppUser(),(t=function(){return e.getUser(n).then(function(r){return u.page.user=r.data,u.user&&u.user._id===r.data._id?u.page.my=!0:u.page.my=!1},function(r){return u.page.error=r})})()}]),angular.module("coders").controller("titleCtrl",["$scope",function(r){var e;e=this,e.title="CSC - A Social Community to learn, teach and grow up.",r.$on("connected",function(r,o){return o?e.title="CSC - "+o.nick+" ("+o.name+")":void 0})}]),angular.module("coders").factory("codersApi",["$q","$http",function(r,e){var o,n,t,u,c,s,i,a,l,d,g;return i="http://localhost:5000/",l=i+"register",a=i+"login",d=i+"logout",g=i+"user",o=function(){var o;return o=r.defer(),e.get(a).success(o.resolve).error(o.reject),o.promise},n=function(r){return'{"user": '+JSON.stringify(r)+"}"},c=function(o){var t;return t=r.defer(),o=n(o),e.post(l,o).success(t.resolve).error(t.reject),t.promise},u=function(o){var t;return t=r.defer(),o=n(o),e.post(a,o).success(t.resolve).error(t.reject),t.promise},s=function(){var o;return o=r.defer(),e.get(d).success(o.resolve).error(o.reject),o.promise},t=function(o){var n;return n=r.defer(),e.get(g+"/"+o).success(n.resolve).error(n.reject),n.promise},{logon:c,login:u,connect:o,logout:s,getUser:t}}]),angular.module("coders").factory("codersAppUser",[function(){var r,e,o;return e=this,e.user={},o=function(r){return e.user=r},r=function(){return e.user},{setAppUser:o,getAppUser:r}}]),angular.module("csView",[]);